# 04. Автоматический исследователь трендов

Этот воркфлоу автоматизирует процесс мониторинга и анализа трендов. Он еженедельно сканирует интернет по заданным темам, отбирает самые релевантные материалы и генерирует на их основе сводный аналитический отчет, который отправляется в Telegram[5].

## Описание

Воркфлоу может быть запущен двумя способами: автоматически по расписанию или вручную через Telegram, что обеспечивает гибкость для плановых и оперативных исследований[5].

**Процесс работы**[5]:
1.  **Запуск**:
    -   **Автоматический**: Срабатывает по расписанию (например, каждую субботу в 10:00) с фиксированным списком тем.
    -   **Ручной**: Запускается сообщением в Telegram, где темы перечислены построчно.
2.  **Поиск информации**: Использует API **Tavily** для поиска самых свежих и релевантных публикаций по заданным темам за последнюю неделю.
3.  **Фильтрация и извлечение**:
    -   Результаты поиска фильтруются по показателю релевантности (`score > 0.6`), чтобы отсеять шум.
    -   Из наиболее релевантных статей извлекается полный текст для глубокого анализа.
4.  **Генерация отчета**:
    -   Все извлеченные тексты агрегируются и передаются в **AI Agent**.
    -   AI-модель, следуя системному промпту, анализирует информацию и создает структурированный отчет в формате Markdown, выделяя главные тренды и ключевые события.
5.  **Доставка**: Готовый отчет отправляется в указанный чат или канал Telegram.

## Ключевые компоненты

-   **Schedule Trigger (Cron)**: Для автоматического запуска по расписанию.
-   **Telegram Trigger**: Для ручного запуска с кастомным списком тем.
-   **Tavily Node**: Для продвинутого поиска информации в интернете.
-   **AI Agent (с OpenRouter/OpenAI)**: Для анализа текстов и генерации сводного отчета.
-   **Code Node**: Для подготовки данных (например, вычисления дат отчетного периода).
-   **Telegram Node**: Для отправки финального отчета.

## Настройка и запуск

1.  **Импорт**: Загрузите `workflow.json` в ваш n8n.
2.  **Настройка кредов**:
    -   **Telegram**: Укажите API-токен вашего бота.
    -   **Tavily**: В узле `Theme Search` введите ваш API-ключ от Tavily.
    -   **AI-провайдер**: Настройте учетные данные для используемой LLM (например, OpenRouter).
3.  **Настройка тем**:
    -   Для планового запуска отредактируйте список тем в узле `Set Fixed Topics`.
4.  **Активация**: Включите воркфлоу. Он будет работать как в автоматическом, так и в ручном режиме.
